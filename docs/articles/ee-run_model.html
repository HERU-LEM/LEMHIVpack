<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>4 Run Model • LEMHIVpack</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="4 Run Model">
<meta property="og:description" content="LEMHIVpack">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">LEMHIVpack</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/aa-introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/bb-model_inputs.html">1 Model Inputs</a>
    </li>
    <li>
      <a href="../articles/cc-model_functions.html">2 Model Functions</a>
    </li>
    <li>
      <a href="../articles/dd-interventions.html">3 Interventions</a>
    </li>
    <li>
      <a href="../articles/ee-run_model.html">4 Run Model</a>
    </li>
    <li>
      <a href="../articles/ff-analysis.html">5 Analysis</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/HERU-LEM/LEMpackHIV/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ee-run_model_files/header-attrs-2.3.3/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>4 Run Model</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/HERU-LEM/LEMpackHIV/blob/master/vignettes/ee-run_model.Rmd"><code>vignettes/ee-run_model.Rmd</code></a></small>
      <div class="hidden name"><code>ee-run_model.Rmd</code></div>

    </div>

    
    
<p>This section combines the components of Sections 1-3 to run the model and produce the raw outputs, which will be used for analysis. After loading of model functions (section 4.0 below), analysis takes place over two subcomponents - deterministic model analysis of combinations of interventions and deterministic model analysis of single interventions. We also conduct a probability sensitivity analysis (PSA) for each component. This produces CEA results and quantifies the uncertainty of our inputs and decisions.</p>
<p><span class="math inline">\(~\)</span></p>
<div id="load-model-functions" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#load-model-functions" class="anchor"></a>4.0 Load model functions</h1>
<p>The core model functions are automatically loaded when users install the <code>LEMHIVpack</code> R package, and load <code><a href="https://rdrr.io/pkg/LEMHIVpack/man">library(LEMHIVpack)</a></code>:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"HERU-LEM/LEMHIVpack"</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">LEMHIVpack</span>)</pre></body></html></div>
<p>Some key base model values (i.e. interventions and CEA parameters, set time period, time steps, discount rate etc.) for <em>CascadeCEA-Interventions-1-LoadBaselineWorkspace.R</em> and what they are currently set to are provided in Table 4.0.</p>
<p><span class="math inline">\(~\)</span></p>
<p><strong>Table 4.0: Sample base model parameters with their R name and value</strong></p>
<table class="table">
<thead><tr class="header">
<th align="left"><strong>Description</strong></th>
<th align="center"><strong>R name</strong></th>
<th align="center"><strong>Value</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Intervention sustainment duration</td>
<td align="center"><code>int.sus</code></td>
<td align="center">10</td>
</tr>
<tr class="even">
<td align="left">Start year</td>
<td align="center"><code>int.first.year</code></td>
<td align="center">2020</td>
</tr>
<tr class="odd">
<td align="left">End of projection year</td>
<td align="center"><code>lyr</code></td>
<td align="center">2040</td>
</tr>
<tr class="even">
<td align="left">Scale up period</td>
<td align="center"><code>scale.up.period</code></td>
<td align="center">18 months</td>
</tr>
<tr class="odd">
<td align="left">Discount rate for cost and QALY</td>
<td align="center"><code>Discounting</code></td>
<td align="center">0.03</td>
</tr>
</tbody>
</table>
<p><span class="math inline">\(~\)</span></p>
<p><em>CascadeCEA-Interventions-1-LoadParameterWorkspace-Combination.R</em> sets global and free model parameters such as intervention scales and effectiveness, city and state level costs, based on calibrated values for the respective parameter. Also in this script - we call model inputs from files named <code>Evidence-Inputs-Master.xlsx</code> and <code>Evidence-Inputs-Master-Ideal.xlsx</code> stored in the <em>data</em> directory, and initialize the model. Finally, we set parameter names using the <em>CascadeCEA-Interventions-1-ParNamesExportIntModel.R</em> script found in the <em>R</em> directory. <strong>Note that the scripts included in <em>01_Setup</em> and main <em>R</em> folders of the github repository will automatically be called by subsequent modules, and do not need to be run on their own.</strong></p>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="deterministic-model-run-for-combinations-of-interventions" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#deterministic-model-run-for-combinations-of-interventions" class="anchor"></a>4.1 Deterministic model run for combinations of interventions</h1>
<p>In this component (use <em>CascadeCEA-Interventions-2-RunModelAndAccum-Combination-Deterministic.R</em>), we run a deterministic model for estimating accumulated costs and epidemiological outcomes of combinations of interventions for individual cities or all cities. Intervention outcome matrices are produced (<code>outcome.comb.mx</code>), with a list of outcomes and respective R labels are provided in Table 4.1. Note that we used a 20-year time horizon (2020–2040) in our main analysis, to capture the long-term individual benefits of ART and second-order transmission effects <span class="citation">(Nosyk et al. 2020)</span>. Both costs and QALYs were reported using a 3% annual discount rate.</p>
<p><span class="math inline">\(~\)</span></p>
<p><strong>Table 4.1: Description of model outcomes with <code>R</code> names </strong></p>
<table class="table">
<colgroup>
<col width="20%">
<col width="79%">
</colgroup>
<thead><tr class="header">
<th align="left"><strong>R name</strong></th>
<th align="center"><strong>Description</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>Infections.total-20Y</code></td>
<td align="center">Projected total infections over 20-year time horizon (2020-2040)</td>
</tr>
<tr class="even">
<td align="left"><code>SuscPY-over20Y</code></td>
<td align="center">Number of person-years among susceptible population over 20-year time horizon (2020-2040)</td>
</tr>
<tr class="odd">
<td align="left"><code>Infections.total-10Y</code></td>
<td align="center">Total infections over 10-year time horizon (2020-2030)</td>
</tr>
<tr class="even">
<td align="left"><code>SuscPY-over10Y</code></td>
<td align="center">Number of person-years among susceptible population over 10-year time horizon (2020-2030)</td>
</tr>
<tr class="odd">
<td align="left"><code>Infections.total-5Y</code></td>
<td align="center">Total infections over 5-year time horizon (2020-2025)</td>
</tr>
<tr class="even">
<td align="left"><code>SuscPY-over5Y</code></td>
<td align="center">Number of person-years among susceptible population over 10-year time horizon (2020-2030)</td>
</tr>
<tr class="odd">
<td align="left"><code>QALYs.sum</code></td>
<td align="center">Sum of quality adjusted life years (QALYs) gained</td>
</tr>
<tr class="even">
<td align="left"><code>costs.total.sum</code></td>
<td align="center">Sum of total costs</td>
</tr>
<tr class="odd">
<td align="left"><code>costs.hru.sum</code></td>
<td align="center">Sum of costs for cumulative healthcare resource utilization (HRU)</td>
</tr>
<tr class="even">
<td align="left"><code>costs.art.sum</code></td>
<td align="center">Sum of ART costs</td>
</tr>
<tr class="odd">
<td align="left"><code>costs.art.ini.sum</code></td>
<td align="center">Sum of ART initiation costs</td>
</tr>
<tr class="even">
<td align="left"><code>costs.oat.sum</code></td>
<td align="center">Sum of Opioid Agonist Therapy (OAT) costs</td>
</tr>
<tr class="odd">
<td align="left"><code>costs.prep.sum</code></td>
<td align="center">Sum of PrEP costs</td>
</tr>
<tr class="even">
<td align="left"><code>costs.prep.tests.sum</code></td>
<td align="center">Sum of HIV test before beginning PrEP costs</td>
</tr>
<tr class="odd">
<td align="left"><code>costs.test.sum</code></td>
<td align="center">Sum of HIV testing costs</td>
</tr>
<tr class="even">
<td align="left"><code>int.costs.sum</code></td>
<td align="center">Sum of intervention costs</td>
</tr>
<tr class="odd">
<td align="left"><code>int.impl.costs.sum</code></td>
<td align="center">Sum of intervention costs during implementation period (18 months)</td>
</tr>
<tr class="even">
<td align="left"><code>int.sust.costs.sum</code></td>
<td align="center">Sum of sustaining interventions (after 18-month implementation period) costs</td>
</tr>
</tbody>
</table>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="probabilistic-sensitivity-analysis-psa-for-combinations" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#probabilistic-sensitivity-analysis-psa-for-combinations" class="anchor"></a>4.2 Probabilistic sensitivity analysis (PSA) for combinations</h1>
<p>In this component we perform PSA on the deterministic model run done in component 4.2 to evaluate the extent of parameter uncertainty for each intervention. For each city, we used the 2000 best-fitting calibrated parameter sets from 10,000 calibration runs, sampling all non-calibrated parameters simultaneously from distributions that were previously developed for each model parameter <span class="citation">(Zang et al. 2020; Krebs et al. 2019)</span>. Intervention outcome matrices are produced (<code>outcome.comb.SA.mx</code>), outcomes and respective labels in R are provided in Table 4.1.</p>
<p>To run PSA on the optimal combination of implementation strategy (OCIS) use <em>CascadeCEA-Interventions-2-RunModelAndAccum-Combination-PSA-OCIS.R</em> which can be found in the <em>02_Run_model</em> directory.</p>
<p>To run PSA on the combinations proximal to the OCIS use <em>CascadeCEA-Interventions-2-RunModelAndAccum-Combination-PSA-Proximal.R</em> which can also be found in the <em>02_Run_model</em> directory.</p>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="deterministic-model-run-for-single-interventions" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#deterministic-model-run-for-single-interventions" class="anchor"></a>4.3 Deterministic model run for single interventions</h1>
<p>This component estimates accumulated costs and epidemiological outcomes for a <em>single</em> intervention rather than a combination of interventions (use <em>CascadeCEA-Interventions-2-RunModelAndAccum-SingleIntervention-Deterministic.R</em>). This component is similar to component 4.2 in the sense that we draw on model functions and data loaded in Sections 1-3. Intervention outcome matrices are produced (<code>outcome.int.mx”</code>), and respective R labels are found in Table 4.1. Users can generate outputs for a single city or all cities.</p>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="probabilistic-sensitivity-analysis-psa-for-single-interventions" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#probabilistic-sensitivity-analysis-psa-for-single-interventions" class="anchor"></a>4.4 Probabilistic sensitivity analysis (PSA) for single interventions</h1>
<p>In this component we perform PSA on the deterministic model run in component 4.4 to evaluate the extent of parameter uncertainty for a single intervention. Intervention outcome matrices are produced (<code>outcome.int.SA.mx</code>), outcomes and respective labels in R are provided in Table 4.1. Use <em>CascadeCEA-Interventions-2-RunModelAndAccum-SingleIntervention-PSA.R</em> found in the <em>R</em> directory.</p>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references hanging-indent">
<div id="ref-evsynth">
<p>Krebs, E., B. Enns, L. Wang, X. Zang, D. Panagiotoglou, C. Del Rio, J. Dombrowski, et al. 2019. “Developing a Dynamic Hiv Transmission Model for 6 U.s. Cities: An Evidence Synthesis.” Journal Article. <em>PLoS One</em> 14 (5): e0217559. <a href="https://doi.org/10.1371/journal.pone.0217559">https://doi.org/10.1371/journal.pone.0217559</a>.</p>
</div>
<div id="ref-core">
<p>Nosyk, B., X. Zang, E. Krebs, B. Enns, J. E. Min, C. N. Behrends, C. Del Rio, et al. 2020. “Ending the Hiv Epidemic in the Usa: An Economic Modelling Study in Six Cities.” Journal Article. <em>Lancet HIV</em> 7 (7): e491–e503. <a href="https://doi.org/10.1016/S2352-3018(20)30033-3">https://doi.org/10.1016/S2352-3018(20)30033-3</a>.</p>
</div>
<div id="ref-calibration">
<p>Zang, X., E. Krebs, J. E. Min, A. Pandya, B. D. L. Marshall, B. R. Schackman, C. N. Behrends, D. J. Feaster, B. Nosyk, and Localized HIV Modeling Study Group. 2020. “Development and Calibration of a Dynamic Hiv Transmission Model for 6 Us Cities.” Journal Article. <em>Med Decis Making</em> 40 (1): 3–16. <a href="https://doi.org/10.1177/0272989X19889356">https://doi.org/10.1177/0272989X19889356</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Xiao Zang, Emanuel Krebs, Benjamin Enns, Jeong Min, Siyuan Chen, Amanda My Linh Quan, Bohdan Nosyk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
